<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Fast Any Moves – Instant Moving Quote</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{font-family:Arial;background:#f4f7fb;margin:0}
.container{max-width:750px;margin:40px auto;background:#fff;padding:35px;border-radius:12px;box-shadow:0 8px 25px rgba(0,0,0,0.08)}
h1{text-align:center;margin-bottom:5px;color:#0d2c54}
.subtitle{text-align:center;color:#555;margin-bottom:25px}
label{font-weight:bold;display:block;margin-top:15px}
input,select,textarea{width:100%;padding:12px;margin-top:5px;border-radius:6px;border:1px solid #ccc;font-size:14px}
button{width:100%;padding:15px;margin-top:25px;background:#0d2c54;color:#fff;border:none;border-radius:6px;font-size:16px;cursor:pointer}
button:hover{background:#154b8a}
.result{margin-top:30px;padding:20px;background:#eef4ff;border-radius:8px}
.success{color:green;font-weight:bold;margin-top:10px}
</style>
</head>

<body>

<div class="container">
<h1>Instant Moving Quote</h1>
<p class="subtitle">Professional removals across London & UK</p>

<form id="quoteForm">

<label>Name *</label>
<input type="text" id="name" required>

<label>Phone *</label>
<input type="text" id="phone" required>

<label>Email *</label>
<input type="email" id="email" required>

<label>Move Date *</label>
<input type="datetime-local" id="moveDate" required>

<label>Do you need help with loading and unloading? *</label>
<select id="service" required>
<option value="">Select</option>
<option value="45">No help required</option>
<option value="55">1 Man</option>
<option value="70">2 Men</option>
<option value="90">3 Men</option>
</select>

<label>Collection Address *</label>
<input type="text" id="collection" required>

<label>Collection Stairs</label>
<select id="stairsCollection">
<option value="0">Ground floor / Lift</option>
<option value="1">1 Flight</option>
<option value="2">2 Flights</option>
<option value="3">3 Flights</option>
<option value="4">4 Flights</option>
</select>

<label>Via Address (optional)</label>
<input type="text" id="via">

<label>Via Stairs</label>
<select id="stairsVia">
<option value="0">Ground floor / Lift</option>
<option value="1">1 Flight</option>
<option value="2">2 Flights</option>
<option value="3">3 Flights</option>
<option value="4">4 Flights</option>
</select>

<label>Delivery Address *</label>
<input type="text" id="delivery" required>

<label>Delivery Stairs</label>
<select id="stairsDelivery">
<option value="0">Ground floor / Lift</option>
<option value="1">1 Flight</option>
<option value="2">2 Flights</option>
<option value="3">3 Flights</option>
<option value="4">4 Flights</option>
</select>

<label>Additional Information</label>
<textarea id="info"></textarea>

<button type="submit">Get My Instant Quote</button>

</form>

<div id="result" class="result"></div>
</div>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA-P2kaqlMH-EOFjVIHbZ4S0Ki8DN2WVFE&libraries=places"></script>
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<script>

emailjs.init("GR5ehmpI9S5BvHCGb");

document.getElementById("moveDate").min = new Date().toISOString().slice(0,16);

window.onload = function(){
new google.maps.places.Autocomplete(document.getElementById('collection'));
new google.maps.places.Autocomplete(document.getElementById('via'));
new google.maps.places.Autocomplete(document.getElementById('delivery'));
};

document.getElementById("quoteForm").addEventListener("submit", function(e){
e.preventDefault();
calculateQuote();
});

function calculateQuote(){

let rate = parseFloat(document.getElementById("service").value);

let stairsCollection = parseInt(document.getElementById("stairsCollection").value);
let stairsVia = parseInt(document.getElementById("stairsVia").value);
let stairsDelivery = parseInt(document.getElementById("stairsDelivery").value);
let stairsTotal = stairsCollection + stairsVia + stairsDelivery;

let collection = document.getElementById("collection").value;
let via = document.getElementById("via").value;
let delivery = document.getElementById("delivery").value;

let service = new google.maps.DistanceMatrixService();
let destinations = via ? [via, delivery] : [delivery];

service.getDistanceMatrix({
origins:[collection],
destinations:destinations,
travelMode: google.maps.TravelMode.DRIVING
}, function(response,status){

if(status!=="OK"){ alert("Distance calculation error"); return; }

let totalMeters=0;
let totalSeconds=0;

response.rows[0].elements.forEach(el=>{
totalMeters+=el.distance.value;
totalSeconds+=el.duration.value;
});

let miles = totalMeters/1609.34;
let costMiles = miles*1.5;

let loadingTime = 45*60;
let stairsTime = stairsTotal*10*60;

let estimatedSeconds = totalSeconds+loadingTime+stairsTime;

let estimatedHours = estimatedSeconds/3600;
let roundedHours = Math.ceil(estimatedHours);
if(roundedHours < 2) roundedHours = 2;

let costHours = roundedHours*rate;

let costStairs = 0;
if(rate !== 45){
costStairs = stairsTotal*10;
}

let total = costHours+costMiles+costStairs;

let finalHours = Math.floor(estimatedSeconds/3600);
let finalMinutes = Math.round((estimatedSeconds%3600)/60);
if(finalMinutes == 60){ finalHours++; finalMinutes=0; }

let rawDate = document.getElementById("moveDate").value;
let dateObj = new Date(rawDate);

let formattedDate =
dateObj.getDate().toString().padStart(2,'0') + "/" +
(dateObj.getMonth()+1).toString().padStart(2,'0') + "/" +
dateObj.getFullYear() + " – " +
dateObj.toLocaleTimeString('en-GB', {hour: '2-digit', minute:'2-digit'});

let breakdown =
"Estimated working time: "+finalHours+"h "+finalMinutes+"m\n"+
"Hours charged (rounded): "+roundedHours+"\n\n"+
"Cost hours: £"+costHours.toFixed(2)+"\n"+
"Miles: "+miles.toFixed(2)+"\n"+
"Cost miles: £"+costMiles.toFixed(2)+"\n\n"+
"Collection Stairs: "+stairsCollection+"\n"+
"Via Stairs: "+stairsVia+"\n"+
"Delivery Stairs: "+stairsDelivery+"\n"+
"Total flights: "+stairsTotal+"\n"+
"Cost stairs: £"+costStairs.toFixed(2)+"\n\n"+
"TOTAL: £"+total.toFixed(2);

document.getElementById("result").innerHTML =
"<b>Estimated working time:</b> "+finalHours+"h "+finalMinutes+"m<br>"+
"<b>Hours charged (rounded):</b> "+roundedHours+"<br><br>"+
"<b>Cost hours:</b> £"+costHours.toFixed(2)+"<br>"+
"<b>Miles:</b> "+miles.toFixed(2)+"<br>"+
"<b>Cost miles:</b> £"+costMiles.toFixed(2)+"<br><br>"+
"<b>Total flights:</b> "+stairsTotal+"<br>"+
"<b>Cost stairs:</b> £"+costStairs.toFixed(2)+"<br><br>"+
"<b style='font-size:18px'>TOTAL: £"+total.toFixed(2)+"</b>"+
"<div class='success'>Quote sent successfully! Check your email.</div>";

emailjs.send("service_1e9jyk9","template_0tbv6y9",{
name: document.getElementById("name").value,
phone: document.getElementById("phone").value,
email: document.getElementById("email").value,
move_date: formattedDate,
collection: collection,
via: via,
delivery: delivery,
quote_breakdown: breakdown
});

});
}
</script>

</body>
</html>
