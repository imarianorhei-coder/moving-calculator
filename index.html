<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Instant Moving Quote</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{font-family:Arial;background:#f4f6f9;margin:0}
.container{max-width:700px;margin:40px auto;background:#fff;padding:30px;border-radius:10px;box-shadow:0 5px 20px rgba(0,0,0,0.08)}
h1{text-align:center}
label{font-weight:bold;display:block;margin-top:15px}
input,select,textarea{width:100%;padding:10px;margin-top:5px;border-radius:6px;border:1px solid #ccc}
button{width:100%;padding:15px;margin-top:20px;background:#007bff;color:#fff;border:none;border-radius:6px;font-size:16px;cursor:pointer}
button:hover{background:#0056b3}
.result{margin-top:25px;padding:15px;background:#eef5ff;border-radius:8px}
</style>
</head>

<body>

<div class="container">
<h1>Instant Moving Quote</h1>

<form id="quoteForm"
action="https://formsubmit.co/imarianorhei@gmail.com"
method="POST">

<input type="hidden" name="_subject" value="New Moving Quote Request">
<input type="hidden" name="_template" value="box">
<input type="hidden" name="_autoresponse" value="Thank you for your request. We will contact you shortly.">

<label>Name *</label>
<input type="text" name="Name" required>

<label>Phone *</label>
<input type="text" name="Phone" required>

<label>Email *</label>
<input type="email" name="Email" required>

<label>Move Date *</label>
<input type="datetime-local" id="moveDate" name="Move Date" required>

<label>Hours (Minimum 2) *</label>
<input type="number" id="hours" name="Hours" min="2" value="2" required>

<label>Do you need help with loading and unloading? *</label>
<select id="service" name="Service" required>
<option value="">Select</option>
<option value="45">No help required</option>
<option value="55">1 Man</option>
<option value="70">2 Men</option>
<option value="90">3 Men</option>
</select>

<label>Collection Address *</label>
<input type="text" id="collection" name="Collection Address" required>

<label>Is there any flight of stairs / no lift?</label>
<select id="stairsCollection">
<option value="0">Ground floor / Lift</option>
<option value="1">1 Flight</option>
<option value="2">2 Flights</option>
<option value="3">3 Flights</option>
<option value="4">4 Flights</option>
</select>

<label>Via Address (optional)</label>
<input type="text" id="via" name="Via Address">

<label>Is there any flight of stairs / no lift?</label>
<select id="stairsVia">
<option value="0">Ground floor / Lift</option>
<option value="1">1 Flight</option>
<option value="2">2 Flights</option>
<option value="3">3 Flights</option>
<option value="4">4 Flights</option>
</select>

<label>Delivery Address *</label>
<input type="text" id="delivery" name="Delivery Address" required>

<label>Is there any flight of stairs / no lift?</label>
<select id="stairsDelivery">
<option value="0">Ground floor / Lift</option>
<option value="1">1 Flight</option>
<option value="2">2 Flights</option>
<option value="3">3 Flights</option>
<option value="4">4 Flights</option>
</select>

<label>Additional Information</label>
<textarea name="Additional Info"></textarea>

<input type="hidden" id="quoteBreakdown" name="Quote Breakdown">

<button type="submit">Get My Instant Quote</button>

</form>

<div id="result" class="result"></div>
</div>

<script async
src="https://maps.googleapis.com/maps/api/js?key= AIzaSyA-P2kaqlMH-EOFjVIHbZ4S0Ki8DN2WVFE&libraries=places">
</script>

<script>

document.getElementById("moveDate").min = new Date().toISOString().slice(0,16);

window.onload = function(){
if(typeof google !== "undefined"){
new google.maps.places.Autocomplete(document.getElementById('collection'));
new google.maps.places.Autocomplete(document.getElementById('via'));
new google.maps.places.Autocomplete(document.getElementById('delivery'));
}
};

document.getElementById("quoteForm").addEventListener("submit", function(e){
e.preventDefault();
calculateQuote(true);
});

function calculateQuote(sendEmail=false){

let hours = Math.max(2, parseInt(document.getElementById("hours").value));
let rate = parseFloat(document.getElementById("service").value);
if(!rate){ alert("Please select service"); return; }

let stairsTotal =
parseInt(document.getElementById("stairsCollection").value) +
parseInt(document.getElementById("stairsVia").value) +
parseInt(document.getElementById("stairsDelivery").value);

let collection = document.getElementById("collection").value;
let via = document.getElementById("via").value;
let delivery = document.getElementById("delivery").value;

let service = new google.maps.DistanceMatrixService();
let destinations = via ? [via, delivery] : [delivery];

service.getDistanceMatrix({
origins:[collection],
destinations:destinations,
travelMode:'DRIVING'
},function(response,status){

if(status!=="OK"){alert("Distance error");return;}

let totalMeters=0;
let totalSeconds=0;

response.rows[0].elements.forEach(el=>{
totalMeters+=el.distance.value;
totalSeconds+=el.duration.value;
});

let miles=totalMeters/1609.34;
let costMiles=miles*1.5;
let costHours=hours*rate;

let costStairs=0;
if(rate!==45){
costStairs=stairsTotal*10;
}

let total=costHours+costMiles+costStairs;

let loadingSeconds=45*60;
let stairsSeconds=stairsTotal*15*60;
let estimatedSeconds=totalSeconds+loadingSeconds+stairsSeconds;
let reservedSeconds=hours*3600;

if(estimatedSeconds<reservedSeconds){
estimatedSeconds=reservedSeconds;
}

let finalHours=Math.floor(estimatedSeconds/3600);
let finalMinutes=Math.round((estimatedSeconds%3600)/60);

let breakdown =
"Hours charged: "+hours+
"\nCost hours: £"+costHours.toFixed(2)+
"\nMiles: "+miles.toFixed(2)+
"\nCost miles: £"+costMiles.toFixed(2)+
"\nTotal flights: "+stairsTotal+
"\nCost stairs: £"+costStairs.toFixed(2)+
"\nTotal final: £"+total.toFixed(2)+
"\nEstimated total time: "+finalHours+"h "+finalMinutes+"m";

document.getElementById("result").innerHTML =
"<b>Hours charged:</b> "+hours+"<br>"+
"<b>Cost hours:</b> £"+costHours.toFixed(2)+"<br>"+
"<b>Miles:</b> "+miles.toFixed(2)+"<br>"+
"<b>Cost miles:</b> £"+costMiles.toFixed(2)+"<br>"+
"<b>Total flights:</b> "+stairsTotal+"<br>"+
"<b>Cost stairs:</b> £"+costStairs.toFixed(2)+"<br><br>"+
"<b>Total final:</b> £"+total.toFixed(2)+"<br>"+
"<b>Estimated total time:</b> "+finalHours+"h "+finalMinutes+"m";

document.getElementById("quoteBreakdown").value = breakdown;

if(sendEmail){
document.getElementById("quoteForm").submit();
}

});
}

</script>

</body>
</html>
