<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Instant Moving Quote</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{font-family:Arial;background:#f5f5f5;margin:0;padding:0;}
.container{
max-width:750px;margin:auto;background:white;padding:30px;margin-top:40px;
border-radius:10px;box-shadow:0 0 15px rgba(0,0,0,0.1);
}
h1{text-align:center;}
p{text-align:center;color:#666;}
input, select, textarea{
width:100%;padding:10px;margin:8px 0;border-radius:5px;
border:1px solid #ccc;font-size:14px;
}
button{
width:100%;padding:14px;background:#000;color:white;border:none;
border-radius:6px;font-size:16px;cursor:pointer;margin-top:10px;
}
button:hover{background:#333;}
#result{margin-top:20px;padding:15px;background:#f0f0f0;border-radius:6px;}
label{font-weight:bold;display:block;margin-top:12px;}
</style>
</head>

<body>

<div class="container">
<h1>Instant Moving Quote</h1>
<p>Help us serve you better</p>

<form id="quoteForm" action="https://formsubmit.co/imarianorhei@gmail.com" method="POST">

<input type="hidden" name="_subject" value="New Moving Quote">
<input type="hidden" name="_captcha" value="false">

<label>Name *</label>
<input type="text" name="Name" required>

<label>Phone *</label>
<input type="text" name="Phone" required>

<label>Email *</label>
<input type="email" name="Email" required>

<label>Move Date *</label>
<input type="datetime-local" id="moveDate" name="Move_Date" required>

<label>Hours (Minimum 2) *</label>
<input type="number" name="Hours" min="2" value="2" required>

<label>Do you need help with loading and unloading? *</label>
<select id="service" name="Service" required>
<option value="">Select</option>
<option value="45">No help required</option>
<option value="55">1 Man</option>
<option value="70">2 Men</option>
<option value="90">3 Men</option>
</select>

<label>Collection Address *</label>
<input type="text" id="collection" required>

<label>Is there any flight of stairs / no lift?</label>
<select id="collectionStairs">
<option value="0">Ground floor / Lift</option>
<option value="1">1 Flight</option>
<option value="2">2 Flights</option>
<option value="3">3 Flights</option>
<option value="4">4 Flights</option>
</select>

<label>Via Address (optional)</label>
<input type="text" id="via">

<label>Is there any flight of stairs / no lift?</label>
<select id="viaStairs">
<option value="0">Ground floor / Lift</option>
<option value="1">1 Flight</option>
<option value="2">2 Flights</option>
<option value="3">3 Flights</option>
<option value="4">4 Flights</option>
</select>

<label>Delivery Address *</label>
<input type="text" id="delivery" required>

<label>Is there any flight of stairs / no lift?</label>
<select id="deliveryStairs">
<option value="0">Ground floor / Lift</option>
<option value="1">1 Flight</option>
<option value="2">2 Flights</option>
<option value="3">3 Flights</option>
<option value="4">4 Flights</option>
</select>

<label>Additional Information</label>
<textarea name="Additional_Info"></textarea>

<button type="button" onclick="calculateQuote()">Get My Instant Quote</button>

<div id="result"></div>

</form>
</div>

<script>
/* Prevent past dates */
const now = new Date();
now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
document.getElementById("moveDate").min = now.toISOString().slice(0,16);

function calculateQuote(){

if(!google || !google.maps){
alert("Google Maps not loaded");
return;
}

const hours = Math.max(2, parseInt(document.querySelector("[name='Hours']").value));
const rate = parseFloat(document.getElementById("service").value);

const collection = document.getElementById("collection").value;
const via = document.getElementById("via").value;
const delivery = document.getElementById("delivery").value;

if(!collection || !delivery || !rate){
alert("Please complete all required fields");
return;
}

const collectionStairs = parseInt(document.getElementById("collectionStairs").value);
const viaStairs = parseInt(document.getElementById("viaStairs").value);
const deliveryStairs = parseInt(document.getElementById("deliveryStairs").value);

const totalFlights = collectionStairs + viaStairs + deliveryStairs;

/* COST */
let stairsCost = 0;
if(rate !== 45){
stairsCost = totalFlights * 10;
}

const service = new google.maps.DistanceMatrixService();

function calculateLeg(origin, destination, callback){
service.getDistanceMatrix({
origins:[origin],
destinations:[destination],
travelMode:'DRIVING'
}, function(response,status){
if(status !== "OK"){ alert("Distance error"); return; }
callback(
response.rows[0].elements[0].distance.value,
response.rows[0].elements[0].duration.value
);
});
}

function finish(totalDistance,totalDuration){

const miles = (totalDistance / 1609).toFixed(2);
const costMiles = (miles * 1.5).toFixed(2);
const costHours = rate * hours;

/* TIME */
const loadingSeconds = 30 * 60;
const stairsSeconds = totalFlights * 10 * 60;
const finalSeconds = totalDuration + loadingSeconds + stairsSeconds;

const totalHours = Math.floor(finalSeconds / 3600);
const totalMinutes = Math.floor((finalSeconds % 3600) / 60);

const totalFinal = (costHours + parseFloat(costMiles) + stairsCost).toFixed(2);

const whatsappLink =
"https://wa.me/447846769519?text=" +
encodeURIComponent(
"Fast Any Moves Ltd Quote\n\nTotal: £" + totalFinal +
"\nEstimated time: " + totalHours + "h " + totalMinutes + "m" +
"\nMiles: " + miles +
"\nFlights: " + totalFlights
);

document.getElementById("result").innerHTML = `
<strong>Total final:</strong> £${totalFinal}<br>
<strong>Estimated total time:</strong> ${totalHours}h ${totalMinutes}m
<br><br>
<a href="${whatsappLink}" target="_blank">
<button type="button">Send Quote via WhatsApp</button>
</a>
`;

}

if(via){
calculateLeg(collection, via, function(d1,t1){
calculateLeg(via, delivery, function(d2,t2){
finish(d1+d2, t1+t2);
});
});
}else{
calculateLeg(collection, delivery, function(d,t){
finish(d,t);
});
}

}

/* Autocomplete */
function initAutocomplete(){
new google.maps.places.Autocomplete(document.getElementById("collection"));
new google.maps.places.Autocomplete(document.getElementById("via"));
new google.maps.places.Autocomplete(document.getElementById("delivery"));
}
</script>

<script async defer
src="https://maps.googleapis.com/maps/api/js?key= AIzaSyA-P2kaqlMH-EOFjVIHbZ4S0Ki8DN2WVFE&libraries=places&callback=initAutocomplete">
</script>

</body>
</html>
