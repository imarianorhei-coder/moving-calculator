<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Fast Any Moves | Parking Agreement</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{font-family:Arial;margin:0;background:#f4f6f9}
.container{max-width:900px;margin:40px auto;background:#fff;padding:35px;border-radius:12px;box-shadow:0 8px 25px rgba(0,0,0,0.08)}
.company{text-align:center;font-size:22px;font-weight:bold;color:#0b3d91;margin-bottom:5px}
h1{text-align:center;color:#0b3d91;margin-bottom:5px}
h2{text-align:center;font-weight:normal;color:#555;margin-top:0;margin-bottom:30px}
label{font-weight:bold;display:block;margin-top:15px}
input,textarea{width:100%;padding:10px;margin-top:5px;border-radius:6px;border:1px solid #ccc}
button{width:100%;padding:14px;margin-top:25px;background:#0b3d91;color:#fff;border:none;border-radius:6px;font-size:16px;cursor:pointer}
button:hover{background:#072c66}
canvas{border:1px solid #ccc;border-radius:6px;margin-top:10px;width:100%;height:200px}
.note{background:#eef3ff;padding:15px;border-radius:8px;margin-top:15px;font-size:14px}
</style>
</head>

<body>

<div class="container">

<div class="company">FAST ANY MOVES LTD</div>
<h1>Parking Fine Liability Agreement</h1>
<h2>Client Confirmation Required</h2>

<form id="agreementForm">

<label>Move Date *</label>
<input type="datetime-local" id="moveDate" required>

<label>Driver Name *</label>
<input type="text" id="driverName" required>

<label>Van Registration *</label>
<input type="text" id="vanReg" required>

<label>Client Full Name *</label>
<input type="text" id="clientName" required>

<label>Collection Address *</label>
<textarea id="collection" required></textarea>

<label>Delivery Address *</label>
<textarea id="delivery" required></textarea>

<label>Parking Situation Description *</label>
<textarea id="description" required></textarea>

<div class="note">
By signing below, you confirm that you accept responsibility for any parking fines (PCN) issued during or after the move due to lack of suitable legal parking at your property.  
You agree to reimburse Fast Any Moves Ltd within 48 hours of receiving evidence.
</div>

<label>Client Signature *</label>
<canvas id="signaturePad"></canvas>
<button type="button" onclick="clearSignature()">Clear Signature</button>

<button type="submit">Generate PDF & Send</button>

</form>

</div>

<script>

const { jsPDF } = window.jspdf;

let canvas = document.getElementById("signaturePad");
let ctx = canvas.getContext("2d");
let drawing = false;

canvas.addEventListener("mousedown", start);
canvas.addEventListener("mouseup", stop);
canvas.addEventListener("mousemove", draw);

canvas.addEventListener("touchstart", start);
canvas.addEventListener("touchend", stop);
canvas.addEventListener("touchmove", drawTouch);

function start(){ drawing=true; }
function stop(){ drawing=false; ctx.beginPath(); }

function draw(e){
if(!drawing) return;
ctx.lineWidth=2;
ctx.lineCap="round";
ctx.strokeStyle="#000";
ctx.lineTo(e.offsetX,e.offsetY);
ctx.stroke();
ctx.beginPath();
ctx.moveTo(e.offsetX,e.offsetY);
}

function drawTouch(e){
e.preventDefault();
let rect=canvas.getBoundingClientRect();
let touch=e.touches[0];
let x=touch.clientX-rect.left;
let y=touch.clientY-rect.top;
if(!drawing) return;
ctx.lineWidth=2;
ctx.lineCap="round";
ctx.strokeStyle="#000";
ctx.lineTo(x,y);
ctx.stroke();
ctx.beginPath();
ctx.moveTo(x,y);
}

function clearSignature(){
ctx.clearRect(0,0,canvas.width,canvas.height);
}

document.getElementById("agreementForm").addEventListener("submit",function(e){
e.preventDefault();

let signatureData = canvas.toDataURL();
if(signatureData.length < 1000){
alert("Client signature required.");
return;
}

let moveDate = document.getElementById("moveDate").value;
let driver = document.getElementById("driverName").value;
let vanReg = document.getElementById("vanReg").value;
let client = document.getElementById("clientName").value;
let collection = document.getElementById("collection").value;
let delivery = document.getElementById("delivery").value;
let description = document.getElementById("description").value;

let doc = new jsPDF();

doc.setFontSize(16);
doc.text("FAST ANY MOVES LTD", 20, 20);
doc.setFontSize(14);
doc.text("Parking Fine Liability Agreement", 20, 30);

doc.setFontSize(11);
doc.text("Move Date: " + moveDate, 20, 45);
doc.text("Driver: " + driver, 20, 52);
doc.text("Van Registration: " + vanReg, 20, 59);
doc.text("Client: " + client, 20, 66);

doc.text("Collection Address:", 20, 80);
doc.text(collection, 20, 87);

doc.text("Delivery Address:", 20, 105);
doc.text(delivery, 20, 112);

doc.text("Parking Description:", 20, 130);
doc.text(description, 20, 137);

doc.text("Client accepts liability for any parking fines (PCN) issued.", 20, 155);
doc.text("Payment must be reimbursed within 48 hours of notification.", 20, 162);

doc.addImage(signatureData, "PNG", 20, 175, 80, 30);
doc.text("Client Signature", 20, 210);

doc.save("Parking_Agreement_"+client+".pdf");

let message =
"ðŸ“„ Parking Agreement Signed\n\nClient: "+client+
"\nMove Date: "+moveDate+
"\nVan: "+vanReg+
"\n\nPDF generated. Please attach the file in this chat.";

window.open("https://wa.me/447846769519?text="+encodeURIComponent(message),"_blank");

});

</script>

</body>
</html>
